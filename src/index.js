miro.onReady(() => {
  const icon24 = `<g id="svgg" stroke="null" fill="currentColor">
  <path style=" stroke:none;fill-rule:nonzero;fill-opacity:1;" d="M 18.152344 17.851562 C 16.601562 17.851562 15.109375 17.234375 14.015625 16.132812 L 16.15625 13.992188 C 16.683594 14.527344 17.402344 14.828125 18.152344 14.824219 C 19.714844 14.824219 20.980469 13.558594 20.980469 11.996094 C 20.980469 10.433594 19.714844 9.167969 18.152344 9.167969 C 17.402344 9.164062 16.683594 9.464844 16.15625 10 C 15.566406 10.589844 14.605469 10.589844 14.015625 10 C 13.425781 9.410156 13.425781 8.449219 14.015625 7.859375 C 15.890625 5.984375 18.789062 5.601562 21.085938 6.925781 C 23.378906 8.25 24.5 10.953125 23.8125 13.511719 C 23.125 16.074219 20.804688 17.851562 18.152344 17.851562 Z M 18.152344 17.851562 "/>
  <path style=" stroke:none;fill-rule:nonzero;fill-opacity:1;" d="M 22.488281 13.515625 C 21.652344 13.515625 20.972656 12.839844 20.972656 12.003906 C 20.964844 10.449219 19.710938 9.1875 18.152344 9.175781 C 17.402344 9.171875 16.683594 9.472656 16.15625 10.007812 C 15.566406 10.597656 14.605469 10.597656 14.015625 10.007812 C 13.425781 9.414062 13.425781 8.457031 14.015625 7.867188 C 15.691406 6.195312 18.207031 5.695312 20.394531 6.597656 C 22.578125 7.503906 24.003906 9.636719 24.007812 12.003906 C 24.007812 12.40625 23.847656 12.792969 23.5625 13.074219 C 23.277344 13.359375 22.890625 13.519531 22.488281 13.515625 Z M 22.488281 13.515625 "/>
  <path style=" stroke:none;fill-rule:nonzero;fill-opacity:1;" d="M 5.847656 17.851562 C 3.199219 17.851562 0.878906 16.078125 0.191406 13.519531 C -0.5 10.964844 0.613281 8.261719 2.902344 6.933594 C 5.195312 5.605469 8.089844 5.976562 9.96875 7.84375 C 10.554688 8.40625 10.59375 9.324219 10.058594 9.933594 C 9.523438 10.542969 8.601562 10.621094 7.972656 10.113281 L 7.84375 10 C 7.316406 9.464844 6.597656 9.164062 5.847656 9.167969 C 4.566406 9.167969 3.445312 10.027344 3.113281 11.265625 C 2.785156 12.503906 3.324219 13.808594 4.4375 14.449219 C 5.546875 15.085938 6.945312 14.898438 7.851562 13.992188 L 7.972656 13.886719 C 8.605469 13.410156 9.5 13.5 10.023438 14.097656 C 10.546875 14.691406 10.519531 15.59375 9.960938 16.15625 C 8.867188 17.242188 7.386719 17.851562 5.847656 17.851562 Z M 5.847656 17.851562 "/>
  <path style=" stroke:none;fill-rule:nonzero;fill-opacity:1;" d="M 15.308594 16.808594 C 14.90625 16.808594 14.519531 16.644531 14.234375 16.359375 L 7.5625 9.660156 C 7.085938 9.300781 6.863281 8.699219 6.992188 8.117188 C 7.121094 7.535156 7.582031 7.082031 8.164062 6.964844 C 8.75 6.84375 9.347656 7.078125 9.695312 7.5625 L 16.398438 14.265625 C 16.832031 14.699219 16.957031 15.355469 16.71875 15.921875 C 16.480469 16.484375 15.921875 16.851562 15.308594 16.84375 Z M 15.308594 16.808594 "/>
  <path style=" stroke:none;fill-rule:nonzero;fill-opacity:1;" d="M 8.609375 16.808594 C 8 16.796875 7.460938 16.421875 7.234375 15.863281 C 7.007812 15.300781 7.136719 14.65625 7.5625 14.226562 L 14.234375 7.5625 C 14.832031 7.019531 15.75 7.042969 16.320312 7.613281 C 16.890625 8.179688 16.917969 9.097656 16.375 9.695312 L 9.695312 16.398438 C 9.402344 16.675781 9.011719 16.820312 8.609375 16.808594 Z M 8.609375 16.808594 "/>
  <path style=" stroke:none;fill-rule:nonzero;fill-opacity:1;" d="M 11.964844 24 C 9.597656 24 7.46875 22.570312 6.5625 20.386719 C 5.65625 18.199219 6.15625 15.683594 7.828125 14.007812 L 7.949219 13.894531 C 8.578125 13.339844 9.53125 13.402344 10.085938 14.027344 C 10.640625 14.652344 10.582031 15.609375 9.953125 16.164062 C 8.855469 17.269531 8.859375 19.058594 9.964844 20.160156 C 11.070312 21.261719 12.855469 21.261719 13.960938 20.160156 C 15.0625 19.058594 15.070312 17.269531 13.96875 16.164062 C 13.34375 15.605469 13.289062 14.640625 13.847656 14.015625 C 14.410156 13.390625 15.371094 13.335938 15.996094 13.894531 C 16.035156 13.929688 16.070312 13.964844 16.101562 14 C 17.765625 15.675781 18.257812 18.1875 17.355469 20.367188 C 16.449219 22.546875 14.324219 23.96875 11.964844 23.976562 Z M 11.964844 24 "/>
  <path style=" stroke:none;fill-rule:nonzero;fill-opacity:1;" d="M 11.964844 24 C 11.128906 24 10.453125 23.324219 10.453125 22.488281 C 10.453125 21.652344 11.128906 20.972656 11.964844 20.972656 C 13.109375 20.976562 14.140625 20.285156 14.578125 19.230469 C 15.019531 18.175781 14.777344 16.957031 13.96875 16.148438 C 13.34375 15.589844 13.289062 14.628906 13.847656 14 C 14.410156 13.375 15.371094 13.320312 15.996094 13.878906 C 16.035156 13.914062 16.070312 13.949219 16.101562 13.984375 C 17.777344 15.660156 18.277344 18.175781 17.371094 20.363281 C 16.464844 22.550781 14.332031 23.976562 11.964844 23.976562 Z M 11.964844 24 "/>
  <path style=" stroke:none;fill-rule:nonzero;fill-opacity:1;" d="M 8.941406 10.429688 C 8.539062 10.429688 8.15625 10.269531 7.875 9.984375 C 5.605469 7.691406 5.617188 3.996094 7.902344 1.71875 C 10.1875 -0.558594 13.882812 -0.558594 16.167969 1.71875 C 18.453125 3.996094 18.464844 7.691406 16.195312 9.984375 C 15.632812 10.566406 14.710938 10.605469 14.105469 10.070312 C 13.496094 9.535156 13.417969 8.617188 13.925781 7.988281 L 14.039062 7.859375 C 14.933594 6.953125 15.113281 5.558594 14.476562 4.457031 C 13.835938 3.355469 12.539062 2.820312 11.308594 3.148438 C 10.074219 3.476562 9.21875 4.589844 9.210938 5.863281 C 9.191406 6.597656 9.464844 7.308594 9.96875 7.84375 C 10.402344 8.273438 10.535156 8.925781 10.304688 9.492188 C 10.070312 10.058594 9.523438 10.429688 8.910156 10.429688 Z M 8.941406 10.429688 "/>
  <path style=" stroke:none;fill-rule:nonzero;fill-opacity:1;" d="M 8.941406 10.429688 C 8.539062 10.429688 8.15625 10.269531 7.875 9.984375 C 6.210938 8.316406 5.714844 5.8125 6.605469 3.632812 C 7.5 1.453125 9.609375 0.0234375 11.964844 0 C 12.800781 0 13.480469 0.675781 13.480469 1.511719 C 13.480469 2.347656 12.800781 3.027344 11.964844 3.027344 C 10.40625 3.027344 9.144531 4.289062 9.144531 5.847656 C 9.144531 6.601562 9.453125 7.324219 10 7.84375 C 10.433594 8.273438 10.566406 8.925781 10.335938 9.492188 C 10.101562 10.058594 9.550781 10.429688 8.941406 10.429688 Z M 8.941406 10.429688 "/>
  <path style=" stroke:none;fill-rule:nonzero;fill-opacity:1;" d="M 8.699219 16.820312 C 8.089844 16.820312 7.539062 16.449219 7.308594 15.886719 C 7.074219 15.324219 7.203125 14.675781 7.632812 14.242188 L 14.371094 7.5625 C 14.960938 6.964844 15.925781 6.957031 16.527344 7.546875 C 17.125 8.140625 17.132812 9.105469 16.542969 9.703125 L 9.808594 16.40625 C 9.511719 16.691406 9.109375 16.839844 8.699219 16.820312 Z M 8.699219 16.820312 "/>
  <path style=" stroke:none;fill-rule:nonzero;fill-opacity:1;" d="M 15.398438 16.820312 C 15.011719 16.8125 14.644531 16.65625 14.371094 16.382812 L 7.632812 9.683594 C 7.140625 9.078125 7.1875 8.199219 7.742188 7.652344 C 8.296875 7.105469 9.171875 7.066406 9.773438 7.5625 L 16.503906 14.296875 C 16.933594 14.730469 17.0625 15.378906 16.828125 15.945312 C 16.59375 16.507812 16.042969 16.875 15.429688 16.875 Z M 15.398438 16.820312 "/>
  <path style=" stroke:none;fill-rule:nonzero;fill-opacity:1;" d="M 5.847656 17.851562 C 2.621094 17.847656 0.00390625 15.230469 0 12.003906 C 0 11.167969 0.675781 10.492188 1.511719 10.492188 C 2.347656 10.492188 3.027344 11.167969 3.027344 12.003906 C 3.019531 13.148438 3.710938 14.183594 4.769531 14.621094 C 5.828125 15.058594 7.046875 14.816406 7.851562 14 L 7.972656 13.894531 C 8.605469 13.417969 9.5 13.507812 10.023438 14.105469 C 10.546875 14.699219 10.519531 15.597656 9.960938 16.164062 C 8.867188 17.25 7.386719 17.855469 5.847656 17.851562 Z M 5.847656 17.851562 "/>
  </g>`;
  const icon48 = `
  <g xmlns="http://www.w3.org/2000/svg" id="surface1">
  <path style=" stroke:none;fill-rule:nonzero;fill:rgb(97.647059%,92.941176%,19.607843%);fill-opacity:1;" d="M 36.304688 35.703125 C 33.199219 35.707031 30.222656 34.46875 28.03125 32.265625 L 32.3125 27.984375 C 33.367188 29.054688 34.804688 29.652344 36.304688 29.648438 C 39.429688 29.648438 41.964844 27.117188 41.964844 23.992188 C 41.964844 20.867188 39.429688 18.335938 36.304688 18.335938 C 34.804688 18.332031 33.367188 18.929688 32.3125 20 C 31.128906 21.179688 29.214844 21.179688 28.03125 20 C 26.847656 18.816406 26.847656 16.898438 28.03125 15.71875 C 31.777344 11.96875 37.578125 11.203125 42.167969 13.851562 C 46.761719 16.5 49 21.90625 47.625 27.027344 C 46.25 32.148438 41.609375 35.707031 36.304688 35.703125 Z M 36.304688 35.703125 "/>
  <path style=" stroke:none;fill-rule:nonzero;fill:rgb(98.431373%,69.019608%,25.098039%);fill-opacity:1;" d="M 44.972656 27.03125 C 43.304688 27.03125 41.949219 25.679688 41.949219 24.007812 C 41.933594 20.894531 39.417969 18.375 36.304688 18.351562 C 34.804688 18.347656 33.367188 18.945312 32.3125 20.015625 C 31.128906 21.195312 29.214844 21.195312 28.03125 20.015625 C 26.847656 18.832031 26.847656 16.914062 28.03125 15.734375 C 31.378906 12.386719 36.414062 11.386719 40.785156 13.199219 C 45.160156 15.007812 48.011719 19.273438 48.015625 24.007812 C 48.015625 24.8125 47.695312 25.585938 47.125 26.152344 C 46.554688 26.71875 45.78125 27.039062 44.972656 27.03125 Z M 44.972656 27.03125 "/>
  <path style=" stroke:none;fill-rule:nonzero;fill:rgb(96.862745%,58.039216%,11.372549%);fill-opacity:1;" d="M 11.695312 35.703125 C 6.398438 35.707031 1.757812 32.152344 0.378906 27.039062 C -1 21.925781 1.226562 16.523438 5.808594 13.867188 C 10.386719 11.207031 16.183594 11.953125 19.9375 15.6875 C 21.105469 16.808594 21.183594 18.652344 20.113281 19.867188 C 19.042969 21.085938 17.207031 21.242188 15.945312 20.226562 L 15.6875 20 C 14.632812 18.929688 13.195312 18.332031 11.695312 18.335938 C 9.132812 18.335938 6.890625 20.058594 6.230469 22.53125 C 5.566406 25.007812 6.652344 27.617188 8.871094 28.894531 C 11.09375 30.171875 13.894531 29.800781 15.703125 27.984375 L 15.945312 27.773438 C 17.210938 26.816406 19 27 20.042969 28.191406 C 21.089844 29.386719 21.039062 31.183594 19.921875 32.3125 C 17.734375 34.484375 14.777344 35.703125 11.695312 35.703125 Z M 11.695312 35.703125 "/>
  <path style=" stroke:none;fill-rule:nonzero;fill:rgb(96.862745%,58.039216%,11.372549%);fill-opacity:1;" d="M 30.617188 33.613281 C 29.8125 33.613281 29.039062 33.292969 28.46875 32.722656 L 15.128906 19.316406 C 14.171875 18.605469 13.722656 17.398438 13.984375 16.234375 C 14.242188 15.070312 15.160156 14.167969 16.332031 13.929688 C 17.5 13.691406 18.699219 14.160156 19.394531 15.128906 L 32.796875 28.53125 C 33.664062 29.402344 33.917969 30.710938 33.4375 31.839844 C 32.960938 32.972656 31.847656 33.703125 30.617188 33.6875 Z M 30.617188 33.613281 "/>
  <path style=" stroke:none;fill-rule:nonzero;fill:rgb(96.862745%,58.039216%,11.372549%);fill-opacity:1;" d="M 17.214844 33.613281 C 16.003906 33.589844 14.921875 32.847656 14.46875 31.722656 C 14.015625 30.601562 14.273438 29.3125 15.128906 28.457031 L 28.46875 15.128906 C 29.664062 14.042969 31.5 14.085938 32.640625 15.222656 C 33.785156 16.363281 33.832031 18.195312 32.75 19.394531 L 19.394531 32.796875 C 18.804688 33.347656 18.019531 33.640625 17.214844 33.613281 Z M 17.214844 33.613281 "/>
  <path style=" stroke:none;fill-rule:nonzero;fill:rgb(98.431373%,69.019608%,25.098039%);fill-opacity:1;" d="M 23.933594 48 C 19.199219 47.996094 14.933594 45.144531 13.121094 40.769531 C 11.3125 36.398438 12.3125 31.363281 15.65625 28.015625 L 15.898438 27.789062 C 17.152344 26.683594 19.066406 26.800781 20.171875 28.054688 C 21.28125 29.308594 21.160156 31.222656 19.90625 32.328125 C 17.710938 34.542969 17.722656 38.117188 19.929688 40.320312 C 22.136719 42.519531 25.710938 42.519531 27.917969 40.320312 C 30.128906 38.117188 30.136719 34.542969 27.941406 32.328125 C 26.6875 31.207031 26.578125 29.285156 27.699219 28.03125 C 28.816406 26.777344 30.742188 26.671875 31.996094 27.789062 C 32.070312 27.855469 32.140625 27.925781 32.207031 28 C 35.53125 31.351562 36.515625 36.371094 34.707031 40.730469 C 32.902344 45.089844 28.652344 47.9375 23.933594 47.953125 Z M 23.933594 48 "/>
  <path style=" stroke:none;fill-rule:nonzero;fill:rgb(98.431373%,69.019608%,25.098039%);fill-opacity:1;" d="M 23.933594 48 C 22.261719 48 20.90625 46.644531 20.90625 44.972656 C 20.90625 43.304688 22.261719 41.949219 23.933594 41.949219 C 26.21875 41.949219 28.28125 40.574219 29.15625 38.460938 C 30.035156 36.347656 29.554688 33.917969 27.941406 32.296875 C 26.6875 31.179688 26.578125 29.253906 27.699219 28 C 28.816406 26.746094 30.742188 26.640625 31.996094 27.757812 C 32.070312 27.824219 32.140625 27.898438 32.207031 27.972656 C 35.550781 31.320312 36.550781 36.351562 34.742188 40.726562 C 32.929688 45.097656 28.664062 47.949219 23.933594 47.953125 Z M 23.933594 48 "/>
  <path style=" stroke:none;fill-rule:nonzero;fill:rgb(96.862745%,58.039216%,11.372549%);fill-opacity:1;" d="M 17.882812 20.859375 C 17.078125 20.859375 16.3125 20.535156 15.746094 19.96875 C 11.207031 15.382812 11.234375 7.992188 15.800781 3.4375 C 20.371094 -1.117188 27.765625 -1.117188 32.332031 3.4375 C 36.902344 7.992188 36.925781 15.382812 32.386719 19.96875 C 31.265625 21.136719 29.421875 21.214844 28.207031 20.144531 C 26.992188 19.074219 26.835938 17.234375 27.851562 15.976562 L 28.078125 15.71875 C 29.871094 13.90625 30.226562 11.121094 28.949219 8.917969 C 27.671875 6.710938 25.074219 5.636719 22.613281 6.292969 C 20.152344 6.953125 18.4375 9.175781 18.425781 11.722656 C 18.382812 13.195312 18.925781 14.621094 19.9375 15.6875 C 20.808594 16.550781 21.070312 17.847656 20.609375 18.980469 C 20.144531 20.113281 19.042969 20.855469 17.820312 20.859375 Z M 17.882812 20.859375 "/>
  <path style=" stroke:none;fill-rule:nonzero;fill:rgb(96.862745%,58.039216%,11.372549%);fill-opacity:1;" d="M 17.882812 20.859375 C 17.078125 20.859375 16.3125 20.535156 15.746094 19.96875 C 12.425781 16.628906 11.425781 11.625 13.210938 7.269531 C 15 2.910156 19.222656 0.046875 23.933594 0 C 25.601562 0 26.957031 1.355469 26.957031 3.027344 C 26.957031 4.695312 25.601562 6.050781 23.933594 6.050781 C 20.816406 6.050781 18.289062 8.578125 18.289062 11.695312 C 18.289062 13.203125 18.90625 14.644531 20 15.6875 C 20.867188 16.550781 21.132812 17.847656 20.667969 18.980469 C 20.203125 20.113281 19.105469 20.855469 17.882812 20.859375 Z M 17.882812 20.859375 "/>
  <path style=" stroke:none;fill-rule:nonzero;fill:rgb(96.862745%,58.039216%,11.372549%);fill-opacity:1;" d="M 17.398438 33.644531 C 16.175781 33.640625 15.078125 32.902344 14.613281 31.773438 C 14.148438 30.648438 14.402344 29.351562 15.265625 28.484375 L 28.742188 15.128906 C 29.925781 13.929688 31.855469 13.914062 33.054688 15.097656 C 34.253906 16.28125 34.265625 18.210938 33.085938 19.410156 L 19.621094 32.8125 C 19.023438 33.378906 18.21875 33.679688 17.398438 33.644531 Z M 17.398438 33.644531 "/>
  <path style=" stroke:none;fill-rule:nonzero;fill:rgb(98.431373%,69.019608%,25.098039%);fill-opacity:1;" d="M 30.800781 33.644531 C 30.027344 33.625 29.292969 33.3125 28.742188 32.765625 L 15.265625 19.363281 C 14.28125 18.15625 14.375 16.398438 15.484375 15.304688 C 16.589844 14.207031 18.347656 14.132812 19.542969 15.128906 L 33.007812 28.589844 C 33.871094 29.457031 34.125 30.757812 33.65625 31.886719 C 33.1875 33.015625 32.082031 33.75 30.859375 33.75 Z M 30.800781 33.644531 "/>
  <path style=" stroke:none;fill-rule:nonzero;fill:rgb(96.862745%,58.039216%,11.372549%);fill-opacity:1;" d="M 11.695312 35.703125 C 5.238281 35.691406 0.0078125 30.460938 0 24.007812 C 0 22.335938 1.355469 20.980469 3.027344 20.980469 C 4.695312 20.980469 6.050781 22.335938 6.050781 24.007812 C 6.042969 26.296875 7.417969 28.367188 9.535156 29.246094 C 11.652344 30.121094 14.089844 29.628906 15.703125 28 L 15.945312 27.789062 C 17.210938 26.832031 19 27.015625 20.042969 28.207031 C 21.089844 29.402344 21.039062 31.199219 19.921875 32.328125 C 17.734375 34.496094 14.773438 35.710938 11.695312 35.703125 Z M 11.695312 35.703125 "/>
  </g>`;

  async function onToolbarAppButtonClicked() {
    const isAuthorized = await miro.isAuthorized();

    if (!isAuthorized) {
      // Ask the user to authorize the app.
      await miro.requestAuthorization();
    }

    // Once authorized, open the app.
    openMyApp();
  }

  function openMyApp() {
    miro.board.ui.openLeftSidebar("sidebar.html");
  }

  miro.initialize({
    extensionPoints: {
      toolbar: {
        title: "FluidMemory",
        toolbarSvgIcon: icon24,
        librarySvgIcon: icon48,
        onClick: () => {
          onToolbarAppButtonClicked();
        },
      },
    },
  });
});
