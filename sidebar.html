<html>
    <head>
        <title>Miro - FluidMemory</title>
        <link rel="stylesheet" href="https://unpkg.com/mirotone/dist/styles.css" />
        <link rel="stylesheet" href="https://unpkg.com/metismenu/dist/metisMenu.min.css" />
        <link rel="stylesheet" href="src/style.css" />
    </head>
    <body>
        <div class="sidebar__content">
            <div id="stat-container" class="stat-list">
                <div class="stat-list__header">FluidMemory</div>
                <div class="tabs">
                    <div class="tabs-header-list">
                        <!-- <div tabindex="0" class="tab tab-active" data-tabbtn="tab-cluster">
                            <div class="tab-text tab-cluster">Group</div>
                        </div> -->
                        <div tabindex="1" class="tab tab-active" data-tabbtn="tab-count">
                            <div class="tab-text tab-count">Count</div>
                        </div>
                        <div tabindex="2" class="tab" data-tabbtn="tab-search">
                            <div class="tab-text tab-search">Search</div>
                        </div>
                        <div tabindex="3" class="tab" data-tabbtn="tab-snapshots">
                            <div class="tab-text tab-snapshots">Snapshot</div>
                        </div>
                        <div tabindex="3" class="tab" data-tabbtn="tab-about">
                            <div class="tab-text tab-about">About</div>
                        </div>
                    </div>
                </div>
                <!-- <div class="tab-panel active" id="tab-cluster">
                    <div class="menu-wrapper">
                        <label>Group</label>
                        <ul class="metisMenu" id="clusterList"></ul>
                    </div>
                    <div class="action">
                        <button class="button button-primary" id="createGroupApply">Create Group</button>
                    </div>
                </div> -->
                <div class="tab-panel active" id="tab-count">
                    <div class="form-group">
                        <label>Tag</label>
                        <select class="select" id="tag-select">
                            <option value="tag1">Tag 1</option>
                            <option value="tag2">Tag 2</option>
                            <option value="tag3">Tag 3</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label>Stop list</label>
                        <textarea class="textarea" placeholder="Write keywords(default: 'i, me, my, myself, ...')" id="stopList" spellcheck="true" rows="4"></textarea>
                    </div>
                    <div class="action">
                        <button class="button button-primary" id="countWordApply">Apply</button>
                    </div>

                    <ul class="metisMenu" id="metismenu"></ul>
                </div>
                <div class="tab-panel" id="tab-search">
                    <div class="form-group">
                        <label>Select keywords (comma-separated)</label>
                        <textarea class="textarea" placeholder="Write keywords" id="searchKeywords" spellcheck="true" rows="4"></textarea>
                    </div>
                    <div class="action">
                        <button class="button button-primary" id="searchApply">Search</button>
                    </div>
                    <div class="menu-wrapper">
                        <label>Tags</label>
                        <ul class="metisMenu" id="tagList"></ul>
                    </div>
                    <div class="action">
                        <button class="button button-primary" id="createTagApply">Create tag</button>
                    </div>
                </div>
                <div class="tab-panel" id="tab-snapshots">
                    <div class="action">
                        <button class="button button-primary" id="addSnapshot">Apply</button>
                    </div>
                    <ul class="metisMenu" id="snapshotList"></ul>
                </div>
                <div class="tab-panel active" id="tab-about">
                    <p>
                        <a class="link link-primary" href="https://eightarms.bit.ai/docs/view/33zXPjGB7W6AXCGI">FluidMemory</a> is a user-friendly qualitative data analysis solution that enables teams to collect and analyze written content, including notes, analyst reports, and presentations, across multiple tools including Miro, Mural, Google Sheets, Google Docs, and Google Slides
                    </p>
                    <p>
                        FluidMemory was designed to be intuitive and easy to use. However, sometimes we all run into a challenge here and there. Click on the button to go to our <a class="link link-primary" href="https://eightarms.bit.ai/docs/view/33zXPjGB7W6AXCGI">support site</a> and find resources to help you get the most out of our application.
                    </p>
                </div>
            </div>
        </div>
        <div class="loading-wrapper">
            <div class="loading"></div>
        </div>

        <script src="https://unpkg.com/jquery"></script>
        <script src="https://unpkg.com/metismenu"></script>
        <script src="https://miro.com/app/static/sdk.1.1.js"></script>
        <script src="src/sidebar.js"></script>
        <script src="src/counter.js"></script>
        <script src="src/snapshot.js"></script>
        <script src="src/search.js"></script>
        <!-- <script src="src/cluster.js"></script> -->
        <script>
            miro.onReady(async () => {
                metaData = await miro.board.metadata.get();

                if (!metaData[appId]) {
                    metaData[appId] = { appId };
                    await miro.board.metadata.update(metaData);
                }

                // loadGroupsToList();
                
                loadTagSelectOptions();
            });

            $('[data-tabbtn]').on('click', (e) => {
                tabId = $(e.currentTarget).attr('data-tabbtn');
                $('.tab-panel').removeClass('active');
                $(`#${tabId}`).addClass('active');
                $('[data-tabbtn]').removeClass('tab-active');
                $(e.currentTarget).addClass('tab-active');

                if (tabId == 'tab-count') {
                    loadTagSelectOptions();
                } else if (tabId == 'tab-snapshots') {
                    loadSnapshotsToList();
                } else if (tabId == 'tab-search') {
                    loadTagList();
                }
                // } else if (tabId == 'tab-cluster') {
                //     loadGroupsToList();
                // }
            });
        </script>
    </body>
</html>
